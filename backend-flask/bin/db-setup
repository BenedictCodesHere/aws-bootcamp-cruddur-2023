#! /usr/bin/bash
-e # stop if it fails at any point
CYAN='\033[1;36m'
NO_COLOR='\033[0m'
LABEL="db-setup"
printf "${CYAN}== ${LABEL}${NO_COLOR}\n"

echo "db-setup"


bin_path="$(find . -type d -name "bin" -path "./backend-flask/*")"

echo $bin_path

if [ "$1" == "prod" ]; then

    source "$bin_path/db-drop" "prod"
    source "$bin_path/db-create" "prod"
    source "$bin_path/db-schema-load" "prod"
    source "$bin_path/db-seed" "prod"

else
    source "$bin_path/db-drop"
    source "$bin_path/db-create"
    source "$bin_path/db-schema-load"
    source "$bin_path/db-seed"
fi